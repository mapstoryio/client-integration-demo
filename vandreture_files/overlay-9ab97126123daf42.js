(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9763],{22160:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/widget/[slug]/overlay",function(){return n(40732)}])},40732:function(t,e,n){"use strict";n.r(e),n.d(e,{P:function(){return f},__N_SSG:function(){return q},default:function(){return _}});var a=n(52322),o=n(81747),r=n.n(o),i=n(4466),s=n.n(i),l=n(38827),c=n.n(l),g=n(41242),u=n.n(g),d=n(81539),m=n(56872),p=n(38483),y=n(2784),b=n(21927),q=!0;const f=(0,p.styled)(b.Z,"text-base text-primary  my-4");function _(t){let{route:e,theme:n}=t;const[o,i]=(0,y.useState)(e);(0,y.useRef)(null);return(0,y.useEffect)((()=>{const t=async t=>{try{const e=t.data.split("/"),n=await(0,m.Qo)({lang:"da",slug:e[e.length-1]});i(n)}catch(e){console.log(e)}};return window.parent.postMessage({type:"frameReady"},"*"),window.addEventListener("message",t),()=>window.removeEventListener("message",t)}),[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u(),{id:"c63d29b353374ea8",dynamic:[n.primaryColor,n.darkColor,r().style.fontFamily,s().style.fontFamily,c().style.fontFamily],children:":root{--primary:".concat(n.primaryColor,";--dark:").concat(n.darkColor,";--font-mono:").concat(r().style.fontFamily,";--font-sans:").concat(s().style.fontFamily,";--font-serif:").concat(c().style.fontFamily,"}")}),o&&(0,a.jsx)(d.L,{route:o,onClose:()=>{window.parent.postMessage({type:"closeRequest"},"*"),i(void 0)}},o.slug)]})}},56872:function(t,e,n){"use strict";n.d(e,{Qo:function(){return d},bG:function(){return m}});var a=n(43024),o=n(53116),r=n.n(o),i=n(39738),s=n(26779),l=n(62750);const c=()=>(0,l.eI)({projectId:a.gK,dataset:a.nk,apiVersion:"2021-03-25",token:"",useCdn:!1}),g=r()(c());async function u(t){let{slug:e,lang:n,client:a}=t;const o=e,l=(0,i.kZ)((t=>(a||c()).fetch(t))),g="_type == 'product' \n  ".concat(o?" ":" && defined(route.geoJson.segments)"," \n  && defined(coverImage) && defined(location) ").concat(o?" && slug.".concat(n,'.current=="').concat(o,'"'):"");console.log(g);const u=(await l((0,i.q)("*").filter(g).grab({title:["title.da",i.q.string()],segments:["route.geoJson.segments",i.q.array(i.q.object({path:i.q.array(i.q.array(i.q.number())).optional(),startPoint:i.q.object({lat:i.q.number(),lon:i.q.number()})}))],location:["location",i.q.object({lat:i.q.number(),lng:i.q.number()}).optional()],image:(0,i.PX)("coverImage",{withAsset:["base","dimensions","palette"]}),bounds:["route.geoJson.bounds",i.q.array(i.q.number()).optional()],points:(0,i.q)("route.points").filter().deref().grab$({image:(0,i.PX)("coverImage",{withAsset:["base","palette","dimensions"]}).nullable(),video:(0,i.q)("video.asset").deref().grab$({playbackId:i.q.string()}).nullable(),body:i.q.array(i.q.object({paragraph:i.q.object({da:i.q.contentBlocks().optional()}).optional(),title:i.q.string()})).optional(),title:["title.da",i.q.string()],slug:["slug.da.current",i.q.string()],location:i.q.object({lat:i.q.number(),lng:i.q.number()})}),body:i.q.array(i.q.object({paragraph:i.q.object({da:i.q.contentBlocks()}),title:i.q.string()})).optional(),slug:["slug.da.current",i.q.string()]}))).map((t=>{const e=r()(c()),n=t.segments.flatMap((t=>[[t.startPoint.lon,t.startPoint.lat],...t.path?t.path.map((t=>[t[0],t[1]])):[]])),a={type:"Feature",geometry:{type:"LineString",coordinates:n}};var o=0;const i=s.kE(a),l=t.points.map((t=>{const e=[t.location.lng,t.location.lat],n={type:"Feature",geometry:{type:"Point",coordinates:e}};let r;try{var l;l=0===o?s.dnL(a,0,i-1,{units:"kilometers"}):s.dnL(a,o,1e4,{units:"kilometers"}),r=s.J$c(l,n,{units:"kilometers"}),o=r.properties.location+o}catch(g){return console.log("*************************** problem with turf"),null}const c={type:"Feature",geometry:{type:"Point",coordinates:e},properties:{}};return{...t,distanceAlong:o,feature:c}})),g={type:"Feature",geometry:{type:"LineString",coordinates:n}},u=s.kE(g,{units:"kilometers"});return{...t,points:l.filter((t=>Boolean(t))).map((t=>{const{video:n,...a}=t;return{...a,...n?{video:n}:{},imageUrl:t.image?e.image(t.image).width(800).url():""}})),length:"".concat(u.toFixed(2)," km"),feature:g}}));return u}i.q.string(),(0,i.q)("colorRef").deref().grabOne("color.hex",i.q.string()),i.q.string(),(0,i.q)("items").filter().deref().grab$({title:["title.da",i.q.string()],body:i.q.array(i.q.object({paragraph:i.q.object({da:i.q.contentBlocks()}),title:i.q.string()})).optional(),category:["category._ref",i.q.string()],slug:["slug.da.current",i.q.string()],image:(0,i.PX)("coverImage",{withAsset:["base","palette","dimensions"]}),location:i.q.object({lat:i.q.number(),lng:i.q.number()})});async function d(t){let{slug:e,lang:n,client:a}=t;return(await u({slug:e,lang:n,client:a}))[0]}async function m(t){let{client:e,slug:n}=t;const a=(0,i.kZ)((t=>(e||c()).fetch(t))),o="_type == 'collection' \n  ".concat(n?' && slug.current=="'.concat(n,'"'):""),r=(0,i.q)("*").filter(o).slice(0,10).grab$({image:(0,i.PX)("coverImage",{withAsset:["base","palette","dimensions"]}),items:(0,i.q)("items").filter().deref().grab$({title:["title.da",i.q.string()],id:["_id",i.q.string()],body:i.q.array(i.q.object({paragraph:i.q.object({da:i.q.contentBlocks()}),title:i.q.string()})),category:(0,i.q)("category").deref().grab$({id:["_id",i.q.string()],title:["title.da",i.q.string()],parentCategory:(0,i.q)("parentCategory").deref().grab$({id:["_id",i.q.string()],icon:(0,i.PX)("icon",{withAsset:["base","palette","dimensions"]}).nullable(),title:["title.da",i.q.string()]})}),slug:["slug.da.current",i.q.string()],image:(0,i.PX)("coverImage",{withAsset:["base","palette","dimensions"]}),location:i.q.object({lat:i.q.number(),lng:i.q.number()})})}),s=await a(r);return console.log(s),s.map((t=>({...t,image:{...t.image,asset:{...t.image.asset,url:g.image(t.image).width(800).url()}},mapstyle:"https://api.maptiler.com/maps/topo-v2/style.json?key=DbU8BokPxNlBCu78jNOb"})))}},81747:function(t){t.exports={style:{fontFamily:"'__IBM_Plex_Mono_2bec95', '__IBM_Plex_Mono_Fallback_2bec95'",fontStyle:"normal"},className:"__className_2bec95",variable:"__variable_2bec95"}},4466:function(t){t.exports={style:{fontFamily:"'__Inter_18dadd', '__Inter_Fallback_18dadd'",fontStyle:"normal"},className:"__className_18dadd",variable:"__variable_18dadd"}},38827:function(t){t.exports={style:{fontFamily:"'__PT_Serif_89977a', '__PT_Serif_Fallback_89977a'"},className:"__className_89977a",variable:"__variable_89977a"}}},function(t){t.O(0,[4669,4424,8898,2842,6525,5338,8335,7313,1611,1632,8821,6779,9856,1153,9738,6178,3024,1539,9774,2888,179],(function(){return e=22160,t(t.s=e);var e}));var e=t.O();_N_E=e}]);